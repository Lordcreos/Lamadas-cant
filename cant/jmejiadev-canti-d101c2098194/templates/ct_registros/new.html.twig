{% extends 'base.html.twig' %}

{% block contenido %}
    <div class="container w-100 mt-5">
        <div class="row">
            <div class="col-12">
                <h2>{% trans %}Nuevo Registro{% endtrans %}</h2><hr>
            </div>
        </div>
        {{ form_start(form, {'attr': {'id': 'forNew','class':"needs-validation",'novalidate':''}}) }}
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="userntg">{% trans %}Usuario Ntg{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.userntg,{'id':'userntg','attr':{'style':'display:none'}}) }}
                <input id="untg" class="form-control form-control-xl" value="wedwed" readonly>
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="luserntg" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="camNombre">{% trans %}Campaña{% endtrans %}</label>
            </div>
            <div class="text-left  col-10 mb-3">
                {{ form_widget(form.ctcampanas,{'id':'ctcampanas','required':'required','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lcampanas" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="regDocumento">{% trans %}Documento del Cliente{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.regDocumento,{'id':'regDocumento','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lregDocumento" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="regNombre">{% trans %}Nombre del Cliente{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.regNombre,{'id':'regNombre','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lregNombre" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
         <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="regTelefono">{% trans %}Teléfono del Cliente{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.regTelefono,{'id':'regTelefono','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lregTelefono" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="regProducto">{% trans %}Producto{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.regProducto,{'id':'regProducto','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lregProducto" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="cttipllamadas">{% trans %}Tipo de Llamada{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.cttipllamadas,{'id':'cttipllamadas','required':'required','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lcttipllamadas" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label for="regFecRegistro">{% trans %}Fecha Registro{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                {{ form_widget(form.regFecRegistro,{'id':'regFecRegistro','readonly':'readonly','attr':{'class':'form-control form-control-xl'}}) }}
                <div class="valid-feedback">
                    {% trans %}válido{% endtrans %}
                </div>
                <div id="lregFecRegistro" class="invalid-feedback">
                    {% trans %}inválido!{% endtrans %}
                </div>
            </div>
        </div>
        <div class="form-row align-items-center justify-content-center">
            <div class="text-right col-2">
                <label>{% trans %}Estado{% endtrans %}</label>
            </div>
            <div class="text-left col-10 mb-3">
                        {{ form_widget(form.regEstado,{'id':'regEstado','readonly':'readonly','attr':{'class':'form-control form-control-xl'}}) }}
            </div>
        </div>
        <br>
        <div class="row align-items-center justify-content-center mt-2 mb-5">
            <div class="col-12 smallText text-center">
                <a href="{{ path('ct_registros_index') }}">
                    <button type="button" class="btn btn-info">
                        <i class="fas fa-undo-alt"></i> Volver
                    </button>
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="far fa-save"></i> Guardar
                </button>
            </div>
        </div>
        {{ form_end(form)}}
    </div>



    <script>
        var registros = JSON.parse('{{ ct_registros|json_encode|raw }}');
        console.log(registros);
        $(document).ready(function(){
            $("#userntg").val('{{ app.user.id }}');
            $("#untg").val('{{ app.user.username }}');
            $("#regEstado").val('REGISTRADO');
        });
        // VALIDACION
        (function() {
            'use strict';
            window.addEventListener('load', function() {
                var forms = document.getElementsByClassName('needs-validation');

                var validation = Array.prototype.filter.call(forms, function(form) {

                    form.addEventListener('submit', function(event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        } else {

                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
{% endblock %}
